(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{69:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[a("h1",{attrs:{id:"vscode插件初体验"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vscode插件初体验","aria-hidden":"true"}},[t._v("#")]),t._v(" VSCODE插件初体验")]),a("h2",{attrs:{id:"前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前言","aria-hidden":"true"}},[t._v("#")]),t._v(" 前言")]),a("p",[t._v("使用vscode也有大半年时间了，从一开始的各种问题到现在渐渐好用。插件维护比sublime好，速度能秒atom，这大概就是现在离不开vscode的原因吧。虽然它还有不少问题，比如代码高亮和智能提示，尤其是在vue这种template文件中，完全没有用！")]),a("p",[t._v("不过今天不是来吐槽这个的。虽然说到vscode的插件比sublime维护方便，但是插件数量还是比不上的，毕竟时间还不长。比如我一直很喜欢的作者信息生成的插件，什么名字忘记了，毕竟卸载好久了...主要就是设置了作者姓名，邮箱这些信息之后，在顶部自动生成包括作者/邮箱/时间还有其他自定义的信息。")]),a("p",[t._v("在vscode插件市场找了半天也没找到，决定自己动手撸一个。")]),a("ul",[a("li",[t._v("项目地址："),a("a",{attrs:{href:"https://github.com/excaliburhan/vscode-author-generator",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/excaliburhan/vscode-author-generator")]),t._v("。")]),a("li",[t._v("插件安装：vscode或者市场搜索"),a("code",[t._v("vscode-author-generator")]),t._v("。")])]),a("h2",{attrs:{id:"需求准备"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#需求准备","aria-hidden":"true"}},[t._v("#")]),t._v(" 需求准备")]),a("p",[t._v("首先，确定下这个插件的需求：")]),a("ul",[a("li",[t._v("自动生成作者信息，部分信息(作者/邮箱)可配置。")]),a("li",[t._v("根据文件类型生成不同注释。")]),a("li",[t._v("支持自定义模版。")])]),a("h2",{attrs:{id:"其他准备"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#其他准备","aria-hidden":"true"}},[t._v("#")]),t._v(" 其他准备")]),a("ul",[a("li",[a("a",{attrs:{href:"https://code.visualstudio.com/docs/extensionAPI/vscode-api",target:"_blank",rel:"noopener noreferrer"}},[t._v("vscode api文档")])]),a("li",[a("a",{attrs:{href:"https://code.visualstudio.com/docs/tools/vscecli",target:"_blank",rel:"noopener noreferrer"}},[t._v("vscecli 文档")])])]),a("p",[t._v("这两个文档在之后的开发会用到，下面会讲到。")]),a("h2",{attrs:{id:"开发插件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开发插件","aria-hidden":"true"}},[t._v("#")]),t._v(" 开发插件")]),a("h3",{attrs:{id:"_1-vscecli信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-vscecli信息","aria-hidden":"true"}},[t._v("#")]),t._v(" 1. vscecli信息")]),a("p",[t._v("由于后面生成项目要用到发布者信息，我就把vscecli的生成发布者信息部分先讲了，当然后面发布还要用到它。下面是生成发布者信息的步骤，最好还是按照vscecli的文档来做。")]),a("ul",[a("li",[t._v("安装："),a("code",[t._v("npm install -g vsce")])]),a("li",[t._v("创建："),a("code",[t._v("vsce create-publisher (publisher name)")]),t._v(" (publisher name就是发布者的名字，是你在visualstudio注册的名字，此外你还需要Personal Access Token)")]),a("li",[t._v("登陆："),a("code",[t._v("vsce login (publisher name)")]),t._v(" (这一步会要求你输入发布者名字和Personal Access Token)")])]),a("p",[t._v("至此，本地会记住你的信息，如果你需要更换用户，也可以使用"),a("code",[t._v("vsce logout")]),t._v("登出，并换账号登陆。")]),a("h3",{attrs:{id:"_2-生成项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-生成项目","aria-hidden":"true"}},[t._v("#")]),t._v(" 2. 生成项目")]),a("p",[t._v("这里我使用了官方的generator，生成必要的"),a("code",[t._v("package.json")]),t._v("信息，如果你自己去写，可以参看"),a("a",{attrs:{href:"https://code.visualstudio.com/docs/extensionAPI/extension-manifest",target:"_blank",rel:"noopener noreferrer"}},[t._v("官网文档")]),t._v("。")]),a("ul",[a("li",[a("code",[t._v("npm install -g yo generator-code && yo code")])])]),a("p",[a("img",{attrs:{src:"https://static.excaliburhan.com/blog/20170213/COWO3NSOempfVbg695QfgHSA.jpeg",alt:"alt"}})]),a("p",[t._v("可以看到，提供了几种基本插件/主题编写的模版，由于我没学过typescript，这里选择了javascript的插件。")]),a("p",[t._v("按部就班填写信息，如果你已经在上一步登陆"),a("code",[t._v("vsce")]),t._v("，这里的publisher name是自动填写的，你也可以手动填写，但保持和你的注册用户名一致。")]),a("p",[a("img",{attrs:{src:"https://static.excaliburhan.com/blog/20170213/_YPzqd-46NhRNCdsNROv3yY_.jpeg",alt:"alt"}})]),a("p",[t._v("确认后，会自动使用npm安装依赖，耐心等待一会，项目就生成完毕。")]),a("p",[t._v("我这里没有让它自动生成git项目，可以通过"),a("code",[t._v("git remote add")]),t._v("添加你自己的github仓库地址。")]),a("p",[a("img",{attrs:{src:"https://static.excaliburhan.com/blog/20170213/4ez3C47KiN2xLoqOAcJ-AKNL.jpeg",alt:"alt"}})]),a("p",[t._v("生成的项目结构大概是这样的，由于功能比较简单，这里只要关心"),a("code",[t._v("extension.js")]),t._v("就可以了，这是我们的主要功能js。")]),a("h3",{attrs:{id:"_3-manifest解释"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-manifest解释","aria-hidden":"true"}},[t._v("#")]),t._v(" 3. manifest解释")]),a("p",[t._v("vscode的manifest文件，也就是"),a("code",[t._v("package.json")]),t._v("文件，先来看看默认生成的：")]),a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token property"}},[t._v('"name"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"vscode-test"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  // 插件名字\n    "),a("span",{attrs:{class:"token property"}},[t._v('"displayName"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"vscode-test"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" // 插件显示名字\n    "),a("span",{attrs:{class:"token property"}},[t._v('"description"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"test"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{attrs:{class:"token property"}},[t._v('"version"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"0.0.1"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  // 插件版本\n    "),a("span",{attrs:{class:"token property"}},[t._v('"publisher"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"edwardhjp"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  // 发布者\n    "),a("span",{attrs:{class:"token property"}},[t._v('"engines"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token property"}},[t._v('"vscode"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"^1.5.0"')]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{attrs:{class:"token property"}},[t._v('"categories"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{attrs:{class:"token string"}},[t._v('"Other"')]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{attrs:{class:"token property"}},[t._v('"activationEvents"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{attrs:{class:"token string"}},[t._v('"onCommand:extension.sayHello"')]),t._v(" // 激活事件，onCommand表示command调用，就是在vscode用`cmd + shift + p`调出来后使用，其他的参看文档。\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{attrs:{class:"token property"}},[t._v('"main"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"./extension"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" // 入口文件\n    "),a("span",{attrs:{class:"token property"}},[t._v('"contributes"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token property"}},[t._v('"commands"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{attrs:{class:"token property"}},[t._v('"command"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"extension.sayHello"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  // `cmd + shift + p`实际执行的command，和上面的激活事件要对应\n            "),a("span",{attrs:{class:"token property"}},[t._v('"title"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"Hello World"')]),t._v(" // `cmd + shift + p`调用显示名字\n        "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{attrs:{class:"token property"}},[t._v('"scripts"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token property"}},[t._v('"postinstall"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"node ./node_modules/vscode/bin/install"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{attrs:{class:"token property"}},[t._v('"test"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"node ./node_modules/vscode/bin/test"')]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{attrs:{class:"token property"}},[t._v('"devDependencies"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token property"}},[t._v('"typescript"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"^2.0.3"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{attrs:{class:"token property"}},[t._v('"vscode"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"^1.0.0"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{attrs:{class:"token property"}},[t._v('"mocha"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"^2.3.3"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{attrs:{class:"token property"}},[t._v('"eslint"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"^3.6.0"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{attrs:{class:"token property"}},[t._v('"@types/node"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"^6.0.40"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{attrs:{class:"token property"}},[t._v('"@types/mocha"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"^2.2.32"')]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),a("p",[t._v("基本解释都写在注释里了，根据自己需要修改吧。")]),a("h3",{attrs:{id:"_4-extension-js编写"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-extension-js编写","aria-hidden":"true"}},[t._v("#")]),t._v(" 4. extension.js编写")]),a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" vscode "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("require")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'vscode'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// 包含vscode所有api的模块")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("activate")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("context"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("// 插件激活事件，必须与package.json的对应")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" disposable "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" vscode"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("commands"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("registerCommand")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'extension.sayHello'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token comment"}},[t._v("// Info信息框")]),t._v("\n        vscode"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("window"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("showInformationMessage")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'Hello World!'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    context"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("subscriptions"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("push")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("disposable"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nexports"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("activate "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" activate"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("// 取消插件激活事件")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("deactivate")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nexports"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("deactivate "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" deactivate"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),a("p",[t._v("官方的js文件，就是在调用的时候弹一个"),a("code",[t._v("Hello World!")]),t._v("的提示框。原则上你的逻辑都应该在"),a("code",[t._v("registerCommand")]),t._v("的function里面。如果你的逻辑很复杂，建议把逻辑移到外面，合理解构代码。")]),a("p",[t._v("你可以在vscode打开项目的目录文件，然后使用"),a("code",[t._v("F5")]),t._v("进行debug模式，vscode会起一个扩展主机给你进行开发。")]),a("p",[t._v("但是我的vscode不知道什么原因，扩展主机一直失败。我都是直接把项目拷贝到本地插件目录进行开发的，每次debug都要重启vscode，说多了都是泪～")]),a("p",[t._v("如果你知道怎么解决，请告诉我！")]),a("h3",{attrs:{id:"_5-插件发布"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-插件发布","aria-hidden":"true"}},[t._v("#")]),t._v(" 5. 插件发布")]),a("p",[t._v("又要用到刚才的vscecli了。")]),a("p",[t._v("在项目根目录使用："),a("code",[t._v("vsce package")]),t._v("打包你的插件，会生成一个"),a("code",[t._v("extensionName-version.vsix")]),t._v("的信息文件。")]),a("p",[t._v("然后："),a("code",[t._v("vsce publish")]),t._v("，进行发布，如果成功，会返回类似内容：")]),a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("Successfully published publisherName"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("extensionName@version"),a("span",{attrs:{class:"token operator"}},[t._v("!")]),t._v("\n")])]),a("h2",{attrs:{id:"尾声"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#尾声","aria-hidden":"true"}},[t._v("#")]),t._v(" 尾声")]),a("p",[t._v("好了，现在你可以在vscode市场搜索你自己上传的插件了。祝大家写得愉快！")])])}],!1,null,null,null);s.default=e.exports}}]);